# =============================================================================
# Minalesh Marketplace - Environment Variables
# =============================================================================
# 
# Copy this file to .env and fill in your actual values
# Never commit .env to version control!
#
# Required fields are marked with [REQUIRED]
# Optional fields are marked with [OPTIONAL]
#
# =============================================================================

# =============================================================================
# Node Environment
# =============================================================================
NODE_ENV=development # development, production, or test

# =============================================================================
# Beta Program Configuration
# =============================================================================
# [OPTIONAL] Enable beta mode to show beta badge and feedback widgets
NEXT_PUBLIC_BETA_MODE=true
NEXT_PUBLIC_BETA_END_DATE=2026-04-01 # When beta program ends

# =============================================================================
# Database Configuration
# =============================================================================
# [REQUIRED] PostgreSQL connection URL (use pooled connection for production)
# Format: postgresql://username:password@host:port/database
# 
# For Supabase (recommended for MVP):
#   - DATABASE_URL: Use port 6543 with pgbouncer=true (pooled)
#   - DIRECT_URL: Use port 5432 (direct connection for migrations)
#   DATABASE_URL=postgresql://postgres:password@db.project.supabase.co:6543/postgres?pgbouncer=true&connection_limit=1
#   DIRECT_URL=postgresql://postgres:password@db.project.supabase.co:5432/postgres
#
# For Neon (recommended for serverless):
#   - Pooling is automatic, use same URL for both
#   DATABASE_URL=postgresql://user:password@endpoint.neon.tech/dbname?sslmode=require
#   DIRECT_URL=postgresql://user:password@endpoint.neon.tech/dbname?sslmode=require
#
# For AWS RDS or DigitalOcean:
#   - Use DATABASE_URL with connection pooler if available
#   - DIRECT_URL for direct connection (migrations)
#
# Local development:
DATABASE_URL=postgresql://user:password@localhost:5432/minalesh
DIRECT_URL=postgresql://user:password@localhost:5432/minalesh

# [OPTIONAL] Direct connection URL for migrations (required for Supabase)
# If not provided, DATABASE_URL will be used for migrations
# DIRECT_URL=postgresql://user:password@host:5432/database

# =============================================================================
# Authentication & Security
# =============================================================================
# [REQUIRED] Secret key for JWT token signing (min 32 characters)
# Generate: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-min-32-chars-change-in-production

# [OPTIONAL] Token expiration times
JWT_EXPIRES_IN=7d
REFRESH_TOKEN_EXPIRES_IN=30d

# [REQUIRED] Secret for securing cron endpoints (min 16 characters)
# Generate: openssl rand -base64 16
CRON_SECRET=your-cron-secret-key-change-in-production

# =============================================================================
# Application URLs
# =============================================================================
# [OPTIONAL] Public-facing URLs (used for emails, redirects, etc.)
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:3000/api
NEXT_PUBLIC_BASE_URL=http://localhost:3000

# =============================================================================
# Email Service (Resend)
# =============================================================================
# [OPTIONAL] Resend API key for sending transactional emails
# Get yours at: https://resend.com
RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# [OPTIONAL] Default sender email (must be verified in Resend)
EMAIL_FROM=noreply@yourdomain.com

# [OPTIONAL] Contact information
CONTACT_EMAIL=support@yourdomain.com
CONTACT_PHONE=+251900000000

# =============================================================================
# SMS Service (Africa's Talking)
# =============================================================================
# [OPTIONAL] SMS provider: africas_talking, twilio, or none
SMS_PROVIDER=none

# [OPTIONAL] Africa's Talking credentials
# Get yours at: https://africastalking.com
AFRICAS_TALKING_USERNAME=sandbox
AFRICAS_TALKING_API_KEY=your-africas-talking-api-key
AFRICAS_TALKING_SHORT_CODE=12345

# =============================================================================
# Payment Gateways
# =============================================================================

# Stripe (International)
# [OPTIONAL] Get your keys at: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Generic payment webhook secret
PAYMENT_WEBHOOK_SECRET=your-payment-webhook-secret

# TeleBirr (Ethiopia)
# [OPTIONAL] Ethiopian mobile payment provider
TELEBIRR_API_KEY=your-telebirr-api-key
TELEBIRR_WEBHOOK_SECRET=your-telebirr-webhook-secret

# CBE Birr (Ethiopia)
# [OPTIONAL] Commercial Bank of Ethiopia
CBE_API_KEY=your-cbe-api-key
CBE_WEBHOOK_SECRET=your-cbe-webhook-secret

# Awash Bank (Ethiopia)
# [OPTIONAL] Awash Bank payment integration
AWASH_API_KEY=your-awash-api-key
AWASH_WEBHOOK_SECRET=your-awash-webhook-secret

# =============================================================================
# Storage (AWS S3)
# =============================================================================
# [OPTIONAL] AWS S3 for file storage (images, documents, etc.)
# Get credentials from AWS IAM
AWS_S3_BUCKET=your-bucket-name
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=AKIAXXXXXXXXXXXXXXXX
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key

# =============================================================================
# CDN & Image Optimization
# =============================================================================
# [OPTIONAL] Custom CDN URL for image delivery
# 
# Vercel's built-in image optimization is used by default (recommended)
# To use a custom CDN, set these variables and uncomment loader config in next.config.js
#
# CloudFlare CDN example:
# NEXT_PUBLIC_CDN_URL=https://yoursite.com
# NEXT_PUBLIC_CDN_PROVIDER=cloudflare
#
# AWS CloudFront example:
# NEXT_PUBLIC_CDN_URL=https://d1234567890abc.cloudfront.net
# NEXT_PUBLIC_CDN_PROVIDER=cloudfront
#
# For AWS CloudFront with S3:
# 1. Create CloudFront distribution pointing to your S3 bucket
# 2. Set CloudFront domain as NEXT_PUBLIC_CDN_URL
# 3. Set NEXT_PUBLIC_CDN_PROVIDER=cloudfront
# 4. Configure cache behaviors for optimal performance
NEXT_PUBLIC_CDN_URL=
NEXT_PUBLIC_CDN_PROVIDER=

# [OPTIONAL] AWS CloudFront Distribution ID (for cache invalidation)
AWS_CLOUDFRONT_DISTRIBUTION_ID=

# [PRODUCTION] Allowed image domains (comma-separated list)
# In production, restrict to specific domains for security
# Example: IMAGE_DOMAINS=your-bucket.s3.amazonaws.com,*.cloudfront.net,cdn.yoursite.com
# Leave empty in development to allow all HTTPS sources
IMAGE_DOMAINS=

# =============================================================================
# Caching (Redis)
# =============================================================================
# [OPTIONAL] Redis connection URL for caching
# Format: redis://username:password@host:port
# For TLS: rediss://username:password@host:port
REDIS_URL=redis://localhost:6379
REDIS_TLS_ENABLED=false

# =============================================================================
# Monitoring & Observability
# =============================================================================
# [OPTIONAL] Sentry for error tracking
# Get your DSN at: https://sentry.io
SENTRY_DSN=https://xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx@sentry.io/xxxxxxx
SENTRY_ORG=your-org
SENTRY_PROJECT=your-project

# [OPTIONAL] New Relic for APM
# Get your license key at: https://newrelic.com
NEW_RELIC_LICENSE_KEY=your-newrelic-license-key
NEW_RELIC_APP_NAME=minalesh-marketplace

# [OPTIONAL] Datadog for APM
# Get your API key at: https://www.datadoghq.com
DATADOG_API_KEY=your-datadog-api-key
DD_API_KEY=your-datadog-api-key
DD_SERVICE=minalesh-marketplace
DD_ENV=production

# [OPTIONAL] Slack webhook for alert notifications
# Create an incoming webhook at: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# [OPTIONAL] Logging level
# Options: trace, debug, info, warn, error, fatal
LOG_LEVEL=info

# =============================================================================
# Analytics
# =============================================================================
# [OPTIONAL] Google Analytics 4 measurement ID
NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX

# [OPTIONAL] Google Tag Manager container ID
NEXT_PUBLIC_GTM_ID=GTM-XXXXXXX

# [OPTIONAL] Facebook Pixel ID for ads tracking
NEXT_PUBLIC_FACEBOOK_PIXEL_ID=

# =============================================================================
# Government API Integration
# =============================================================================
# [OPTIONAL] Ethiopian government API for business verification
GOV_API_KEY=your-gov-api-key

# =============================================================================
# Security & CAPTCHA
# =============================================================================
# [OPTIONAL] hCaptcha for bot protection
# Get your site key and secret at: https://www.hcaptcha.com/
NEXT_PUBLIC_HCAPTCHA_SITE_KEY=your-hcaptcha-site-key
HCAPTCHA_SECRET_KEY=your-hcaptcha-secret-key

# [OPTIONAL] CORS configuration for API access
# Comma-separated list of allowed origins (e.g., https://app.example.com,https://admin.example.com)
# Leave empty or set CORS_ALLOW_ALL=true in development
CORS_ALLOWED_ORIGINS=
# Set to 'true' to allow all origins (NOT recommended for production)
CORS_ALLOW_ALL=true

# =============================================================================
# Internal Services
# =============================================================================
# [OPTIONAL] Secret for internal API calls
INTERNAL_API_SECRET=your-internal-api-secret

# [OPTIONAL] Admin user email for initial setup
ADMIN_EMAIL=admin@yourdomain.com

# [OPTIONAL] Comma-separated list of admin emails
ADMIN_EMAILS=admin@yourdomain.com,admin2@yourdomain.com

# =============================================================================
# Feature Configuration
# =============================================================================
# [OPTIONAL] Batch size for vendor reverification cron
REVERIFICATION_BATCH_SIZE=50

# =============================================================================
# Additional Notes
# =============================================================================
#
# SECURITY BEST PRACTICES:
# 1. Use strong, random values for all secrets
# 2. Never commit .env to version control
# 3. Rotate secrets regularly (every 90 days minimum)
# 4. Use different values for development and production
# 5. Store production secrets in secure vault (AWS Secrets Manager, etc.)
#
# PRODUCTION CHECKLIST:
# ✓ Set JWT_SECRET to a strong random value (32+ characters)
# ✓ Set CRON_SECRET to a strong random value (16+ characters)
# ✓ Configure DATABASE_URL with production database
# ✓ Enable SSL for database connections (sslmode=require)
# ✓ Configure at least one payment gateway
# ✓ Set up email service (RESEND_API_KEY)
# ✓ Configure S3 for file uploads
# ✓ Set up Sentry for error monitoring
# ✓ Set NODE_ENV=production
#
# OPTIONAL BUT RECOMMENDED:
# ✓ Configure Redis for caching
# ✓ Set up SMS service for notifications
# ✓ Configure Google Analytics
# ✓ Set up government API integration (for Ethiopian business verification)
#
# =============================================================================
